# Software construction

## 1 Driver installation

**Serial port driver download and installation**

The serial port driver is used for robot arm communication to receive instructions, so you need to download the serial port driver before using myStudio to burn firmware. ultraArm needs to install the **CP34X** (applicable to CH9102 version) driver compressed package.

*Note: For Mac OS, make sure your system is "Preferences->Security & Privacy->General" before installing and allow apps from the App Store and Recognized Developers. *

* ultraArm serial port driver:
   * **CP34X**
     * [Windows10](https://download.elephantrobotics.com/software/drivers/CH9102_VCP_SER_Windows.exe)
     * [MACOS](https://download.elephantrobotics.com/software/drivers/CH9102_VCP_MacOS.zip)

   Click "Install" after the download is complete.

   <img src="../resourse/1-myStudio/1-studioinstallation/驱动安装1.png" style="zoom: 67%;" >

   There will be a prompt after the installation is successful.

## 2 MyBlockly Download
Click [myBlockly](https://download.elephantrobotics.com/software/myblockly/myblockly-Setup-latest.exe) to download. Just follow the prompts to install it.
**Note**: We only need to use myblockly for zero return operation and simple debugging.
### 2.1 myBlockly interface display

<img src="../resourse/3-myblockly/firsttimeuse/Interface display.png" style="zoom: 33%;" />

- Module column:

   - Contains method modules required for program writing, which can be put into the program editing area with the mouse for splicing

- Mini toolbar:

   - Click the pink button in the upper right corner and a small toolbar will appear, where you can select the correct model, serial port and baud rate. You can also obtain the real-time joint angles and coordinates of the robotic arm by clicking the "Read Angle" or "Read Coordinates" button. Click "+/-" in the joint control or coordinate control bar to control the movement of the robotic arm.

- Program editing area:

   - Before running the program, you need to select the correct model, port and baud rate in the initialization module or small toolbar, otherwise the program will not run normally.
   - Drag and drop the required module methods to this area to splice them together to implement your own program.

**Notice**:

1. The baud rate of ultraArm is 115200;
2. When the program cannot run, please check whether the small toolbar is disconnected, as shown in the figure below.

<img src="../resourse/3-myblockly/firsttimeuse/串口关闭.png" style="zoom: 33%;" />


<img src="../resourse/3-myblockly/firsttimeuse/串口打开.png" style="zoom: 33%;" />

### 2.2 Connect to computer

- As shown in the picture, use the provided serial cable to connect the computer and the robotic arm respectively.

![](../resourse/1-Connect/1-PC/PC-connect-1.png)

![](../resourse/1-Connect/1-PC/PC-connect-2.png)


### 2.3 Program running

<img src="../resourse/3-myblockly/firsttimeuse/运行键.png" style="zoom: 50%;" />

Drag the desired method module and edit your own program (as shown in the picture above). After combining the structure of each module, click "Run" to upload the code to the robot arm for running.

**Note**: The ultraArm must return to zero before each movement. After returning to zero, a `delay` module must be added to give the robot arm time to return to zero before proceeding to the next movement.

Click the "Python" option in the upper left corner to view the corresponding Python code, as shown in the figure below.

<img src="../resourse/3-myblockly/firsttimeuse/python代码.png" style="zoom: 33%;" />

### 2.4 Program saving and loading

MyBlockly's program is saved in *.json format. Click the blue box in the upper right corner of the interface. When the "Save" option appears, click it to save the program.

<img src="../resourse/3-myblockly/firsttimeuse/程序保存.png" style="zoom: 67%;" />

Also click the blue box and click the "Load" option to import the saved program.

<img src="../resourse/3-myblockly/firsttimeuse/程序载入.png" style="zoom: 67%;" />

## 3 python installation

> **Note:** Before installation, please confirm whether your computer is 64-bit or 32-bit. Right-click on `My Computer` and select `Properties`. As shown in the figure below, it is a 64-bit operating system, so select the 64-bit Python installation package.

<img src="../resourse/3-myblockly/pythoninstall/computer digits 1.jpg" style="zoom: 67%;" />

<img src="../resourse/3-myblockly/pythoninstall/computer digits 2.jpg" style="zoom: 67%;" />

- **Step 1:** Download and install Python (it is recommended to install python3.7 or above)
   - Python official download address: https://www.python.org/downloads/
   - Click the `Downloads` option to start downloading Python, click `Add Python 3.10 to PATH`, click `Install Now` to start installing Python
   <img src="../resourse/3-myblockly/pythoninstall/pythondownload1.jpg" style="zoom: 33%;" />
   <img src="../resourse/3-myblockly/pythoninstall/pythondownload2.jpg" style="zoom: 50%;" />
   <img src="../resourse/3-myblockly/pythoninstall/pythondownload3.jpg" style="zoom: 50%;" />
  
   - The prompt "Setup was successful" appears, indicating that the installation is complete.
   <img src="../resourse/3-myblockly/pythoninstall/pythondownload4.jpg" style="zoom: 50%;" />

- **Step 2:** pymycobot installation
   - Direct installation by command, no need to clone and download the code, open a console terminal (shortcut key Win+R, enter cmd to enter the terminal), enter the following command and press the Enter key on the keyboard:

   ```python
   pip install pymycobot --upgrade
   ```
- **Step 3:** Install opencv
   - Direct installation by command, no need to clone and download the code, open a console terminal (shortcut key Win+R, enter cmd to enter the terminal), enter the following command and press the Enter key on the keyboard:
   ```
     # The two version numbers need to be consistent. Install version 4.5.5.62 here.
     pip install opencv-python==4.5.5.62
     pip install opencv-contrib-python==4.5.5.62
     ```

<img src =../resourse/3-VisionPickingKit/opencv installation 1.png
width ="500" align ="center">

<img src =../resourse/3-VisionPickingKit/opencv installation 2.png
width ="500" align ="center">






---
[← Previous page](./2.2-Hardwareinstall.md) | [Next page → ](./2.4-Unittesting.md)